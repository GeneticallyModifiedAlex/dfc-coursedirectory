@model Dfc.CourseDirectory.WebV2.Features.Courses.ExpiredCourseRuns.ViewModel
@{
    Layout = "_V2LayoutProviderContext";
    ViewContext.SetLayoutData(title: $"{Model.Total} courses need their start date updating");
}


@if (TempData.ContainsKey(TempDataKeys.ExpiredCoursesNotification))
{
    <pttcd-notification title="Start date edited">
        @TempData[TempDataKeys.ExpiredCoursesNotification]
    </pttcd-notification>
}

<h1 class="govuk-govuk-grid-column-one-half-l">Courses</h1>

<p class="govuk-body-l">
    Courses with a start date 2 months in the past will not be visible to learners searching for opportunities on
    National Careers Service.Find a Course
</p>

<p class="govuk-body">
    Select a course to update. Searching multiple courses will update the start date for those courses.
</p>


<p class="govuk-body">
    If you have courses with multiple mew start date you can <a asp-controller="DataManagement" asp-action="Dashboard" asp-all-route-data="@ProviderContext.RouteValues" class="govuk-link">update all courses by data upload</a>
</p>

        <table class="govuk-table">

            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header">Select</th>
                    <th scope="col" class="govuk-table__header">Course name</th>
                    <th scope="col" class="govuk-table__header govuk-!-width-one-fifth">Your reference</th>
                    <th scope="col" class="govuk-table__header govuk-!-width-one-fifth">Delivery type</th>
                    <th scope="col" class="govuk-table__header govuk-!-width-one-fifth">Start date</th>
                </tr>
                <tr>

                </tr>
            </thead>
            <tbody class="govuk-table__body">
                @if (Model.Rows.Count > 0)
                {
                    foreach (var expiredCourse in Model.Rows)
                    {
                        <tr class="govuk-table__row" data-testid="expiredCourseRow-@expiredCourse.CourseId">
                            <td class="govuk-table__cell" style="border:none">
                            <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" type="checkbox">
                                <label class="govuk-label govuk-checkboxes__label" for="waste"></label>
                            </div>
                            </td>
                            <td class="govuk-table__cell" data-testid="expiredCourseexpiredCourse" style="border:none">@expiredCourse.CourseName</td>
                            <td class="govuk-table__cell" data-testid="expiredCourseexpiredCourse" style="border:none">@expiredCourse.CourseId</td>
                            <td class="govuk-table__cell" data-testid="expiredCourseexpiredCourse" style="border:none">@expiredCourse.DeliveryMode</td>
                            <td class="govuk-table__cell nowrap" data-testid="expiredCourseStartDate" style="border:none">@expiredCourse.StartDate.ToString("dd MMM yyyy")</td>
                        </tr>
                    }
                }
                else
                {
                    <tr class="govuk-table__row">
                        <td class="govuk-table__cell govuk-!-padding-bottom-5 govuk-!-padding-top-5" colspan="3">You have no expired courses</td>
                    </tr>
                }

            </tbody>
        </table>

  <div clsas ="govuk-button-group">
  <govuk-button asp-controller="ExpiredCourseRuns" asp-action="SelectedCourses" asp-route-providerId="f6f783ea-8f3c-4ce4-a664-6cab41f0ac94" class="govuk-button">Continue</govuk-button>
   </div>

<script language="javascript">  
    function toggle(source) { // select all expired courses logic
        checkboxes = document.getElementsByName('expiredCourseCheckbox');
        for(var i=0, n=checkboxes.length; i<n; i++) {
            checkboxes[i].checked = source.checked;
        }
    }
</script>  
